import{r as a,c as e,F as M,j as s,e as F,u as E,b as _,d as T,N as B,g as $,S as m,k as A}from"./index-75e0cb1c.js";import{u as Q}from"./user-4891dc53.js";import{P as Y}from"./Pagination-6d1cdaaa.js";import{H as z}from"./Header-318919e1.js";import{H as U}from"./HeadTitle-2e5ed730.js";import{F as q}from"./Footer-62cbe905.js";import"./logoWhite-701db893.js";const G=({expiredAt:h})=>{const[i,b]=a.useState(10),[C,v]=a.useState(10),[k,f]=a.useState(10),[j,c]=a.useState(10);let r;const w=()=>{const x=new Date(h).getTime();r=setInterval(()=>{const S=new Date().getTime(),n=x-S,P=Math.floor(n/(24*60*60*1e3)),o=Math.floor(n%(24*60*60*1e3)/(1e3*60*60)),N=Math.floor(n%(60*60*1e3)/(1e3*60)),p=Math.floor(n%(60*1e3)/1e3);n<0?clearInterval(r.current):(b(P),v(o),f(N),c(p))})};return a.useEffect(()=>{w()},[]),e(M,{children:s("div",{className:`flex justify-center p-7 gap-3 w-fit mx-auto animate-pulse rounded-xl my-5 ${i==1?"bg-red-500 text-white":"bg-[#232946] text-white"} `,children:[e("p",{className:" font-bold md:text-2xl text-lg",children:"Your plan will expire in"}),e("p",{className:" font-extrabold md:text-2xl text-lg",children:i}),e("p",{className:"font-bold md:text-2xl text-lg ",children:"Days"})]})})},Z=()=>{const{student:h}=F(t=>t.student),i=E(),b=_(),[C,v]=a.useState([]),[k,f]=a.useState(!0),[j,c]=a.useState(!0),[r,w]=a.useState(null),[x,S]=a.useState(1),[n,P]=a.useState(1),[o,N]=a.useState(""),p=x*n,D=p-n,d=C.filter(t=>t.board._id===h.board._id),I=o.trim()!==""?d.filter(t=>o.trim()===""||t.name.toLowerCase().includes(o.toLowerCase())||t.branch.name.toLowerCase().includes(o.toLowerCase())||t.board.name.toLowerCase().includes(o.toLowerCase())):d;let g;o!=""?g=I:g=d.slice(D,p);function L(t){const[l,y]=t.split(":"),u=new Date;return u.setHours(l),u.setMinutes(y),u.setSeconds(0),t=u.toLocaleTimeString("en-US",{hour12:!0,second:void 0}),t}a.useEffect(()=>{(async()=>{const{data:l}=await T("Stoken").get("plan-details");l.status==!1?(b({title:l.message,status:"error",duration:5e3,isClosable:!0,position:"top"}),localStorage.removeItem("Stoken"),i("/signin")):(w(l.subscribed),f(!1),c(!0))})()},[]),a.useEffect(()=>{r?T("Stoken").get("get-tutors").then(t=>{v(t.data),c(!1)}).catch(t=>{console.log(t),c(!1)}):(f(!1),c(!1))},[r]);const H=t=>{T("Stoken").post("new-conversation",{senderId:h._id,receiverId:t}),i("/chats")};return s("div",{className:"min-h-screen max-w-screen-2xl mx-auto w-full pt-16 bg-[#d4d8f0] overflow-x-hidden",children:[e(B,{}),e(z,{}),e(U,{title:"tutors"}),k?s($,{padding:"6",boxShadow:"lg",bg:"white",className:"mt-5 mx-auto h-52 w-4/5 rounded-3xl flex items-center justify-center",children:[e(m,{height:"28",mt:"3",width:"28"}),s("div",{className:"ml-5",children:[e(m,{height:"2",width:"2xl",mt:"3"}),e(m,{height:"2",width:"2xl",mt:"3"}),e(m,{height:"2",width:"2xl",mt:"3"}),e(m,{height:"2",width:"2xl",mt:"3"})]}),e(m,{height:"8",ml:"5",width:"20"})]}):s("div",{children:[r?e(G,{expiredAt:h.subscription.expiredAt}):null,r&&d.length>0?e("div",{className:"bg-gray-400 w-max p-3 rounded-full md:mb-0 mb-4 mx-auto",children:e("input",{type:"text",name:"",id:"",placeholder:"Search tutors",className:"bg-transparent placeholder-white font-semibold focus:outline-none",onChange:t=>N(t.target.value)})}):null,s("div",{children:[r?e("div",{children:j?e("div",{className:"flex",children:e(A,{thickness:"4px",speed:"0.65s",emptyColor:"gray.200",color:"blue.500",size:"xl",mx:"auto",my:"6"})}):e("div",{children:d.length>0?e("div",{className:"h-4/6",children:g.length>0?g.map((t,l)=>e("div",{className:"p-2 flex justify-center ",children:s("div",{className:"bg-[#fffffe] hover:shadow-xl flex flex-col justify-evenly md:flex-row hover:opacity-90  text-[#232946]  w-3/4 rounded-xl mt-5 p-5 h-fit text-center",children:[e("div",{className:" w-fit flex flex-col mx-auto md:mx-0",children:e("img",{src:t.profilePicture?`http://localhost:4000/${t.profilePicture}`:Q,className:"w-40 h-40 object-cover rounded-bl-3xl rounded-tr-3xl shadow-sm shadow-white",alt:""})}),s("div",{className:"flex flex-col justify-center md:items-start uppercase",children:[e("div",{className:"mb-4 font-bold",children:t.name}),s("div",{children:["Board: ",t.board.name]}),s("div",{children:["Branch: ",t.branch.name]}),s("div",{children:["Subject:"," ",t.subjects.map((y,u)=>s("span",{children:[y,","]},u))]}),s("div",{children:["time available :"," ",L(t.timeFrom)," to"," ",L(t.timeTo)]})]}),e("div",{className:"flex flex-col justify-center",onClick:()=>H(t._id),children:s("span",{children:[" ",e("p",{className:"bg-[#d4939d] p-2 text-black rounded-3xl uppercase font-bold mt-5 w-full hover:bg-[#232946] hover:text-white cursor-pointer mx-auto",children:"message"})," "]})})]})},l)):s("p",{className:"text-center font-semibold my-8",children:['No results found for "',o,'"']})}):s("div",{className:"h-52",children:[e("p",{className:"text-center font-bold text-2xl",children:"No tutors are there available"})," "]})})}):s("div",{className:"h-52 flex flex-col items-center",children:[e("p",{className:"text-center font-bold text-2xl mt-10",children:"You are not subscribed to access tutors"}),e("button",{className:"bg-[#eebbc3] p-2 rounded-lg uppercase mt-4 font-bold",onClick:()=>i("/plans"),children:"check plans"})]}),o!=""?null:e(Y,{totalContents:d.length,contentsPerPage:n,setCurrentPage:S,currentPage:x})]})]}),e("div",{className:"mt-5",children:e(q,{})})]})};export{Z as default};
