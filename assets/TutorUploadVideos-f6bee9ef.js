import{u as T,b as L,r as a,e as E,d as m,j as i,c as t,B as _}from"./index-75e0cb1c.js";import{N as I,F as D}from"./Footer-9eebb72f.js";import"./index.esm-ed29fecc.js";import"./index.esm-21486a75.js";import"./index.esm-b2e70fb2.js";import"./logoWhite-701db893.js";const O=()=>{const r=T(),s=L(),[N,S]=a.useState([]),[w,v]=a.useState([]),[l,y]=a.useState(""),[d,g]=a.useState(""),[b,p]=a.useState(""),[x,f]=a.useState([]),[o,k]=a.useState({videoName:"",videoLink:""}),[j,h]=a.useState(null),{tutor:u}=E(e=>e.tutor);a.useEffect(()=>{u.approved==!1&&u.rejected==!1?r("/tutor/approval-pending"):u.rejected?r("/tutor/approval-rejected"):u.blocked&&(localStorage.removeItem("Ttoken"),r("/tutor"),s({title:"Blocked",description:"Your account is blocked by the admin",status:"error",duration:5e3,isClosable:!0,position:"top"}))},[]),a.useEffect(()=>{m("Ttoken").get("tutor/boards").then(e=>{e.data.status==!1?(s({title:e.data.message,status:"error",duration:5e3,isClosable:!0,position:"top"}),localStorage.removeItem("Ttoken"),r("/tutor")):S(e.data.boards)}).catch(e=>{console.error(e),s({title:e.message,status:"error",duration:5e3,isClosable:!0,position:"top"})})},[]),a.useEffect(()=>{l?(g(""),p(""),m("Ttoken").get(`tutor/branches?board=${l}`).then(e=>{e.data.status==!1?(localStorage.removeItem("Ttoken"),r("/tutor")):v(e.data.branches)}).catch(e=>{console.log(e),s({title:e.message,status:"error",duration:5e3,isClosable:!0,position:"top"})})):v([])},[l]),a.useEffect(()=>{d?(p(""),m("Ttoken").get(`tutor/subjects?branch=${d}`).then(e=>{e.data.status==!1?(localStorage.removeItem("Ttoken"),r("/tutor")):f(e.data.subjects)}).catch(e=>{console.log(e),s({title:e.message,status:"error",duration:5e3,isClosable:!0,position:"top"})})):f([])},[d,l]);const n=e=>{s({title:e,status:"warning",duration:5e3,isClosable:!0,position:"top"})};return i("div",{className:"bg-gray-400 min-h-screen max-w-screen-2xl mx-auto w-full",children:[t(I,{}),i("div",{className:"overflow-hidden",children:[t("div",{className:"bg-gray-600",children:t("h1",{className:"font-bold text-white text-center text-lg uppercase h-12 p-2",children:"upload video"})}),i("form",{action:"",onSubmit:async e=>{if(e.preventDefault(),!l){n("Select a board");return}if(!d){n("Select a branch");return}if(!b){n("Select a subject");return}const C=/^[a-zA-Z0-9_-\s]+$/;if(!o.videoName||!C.test(o.videoName)){n("Enter the name of the video");return}const B=/(?:https?:\/\/)?(?:www\.)?youtu(?:\.be|be\.com)\/(?:embed\/|v\/|watch\?v=)?([a-zA-Z0-9\-_]+)/;if(!o.videoLink||!B.test(o.videoLink)){n("Add youtube link of the video");return}h(!0),await m("Ttoken").post("tutor/upload-videos",{...o,board:l,branch:d,subject:b,exclusive:!0}).then(c=>{h(!1),c.data.uploaded?r("/tutor/uploads"):s({title:c.data.message,status:"error",duration:5e3,isClosable:!0,position:"top"})}).catch(c=>{h(!1),console.log(c),s({title:err.message,status:"error",duration:5e3,isClosable:!0,position:"top"})})},className:"m-3 w-3/4 mx-auto",children:[i("select",{name:"board",value:l,onChange:e=>{y(e.target.value)},className:"block border border-grey-light w-full p-3 rounded mb-4 uppercase",children:[t("option",{value:"",className:"block border border-grey-light w-full p-3 rounded mb-4",disabled:!0,children:"Select Board/University"}),N.map(e=>t("option",{value:e._id,className:"block border border-grey-light w-full p-3 rounded mb-4 uppercase",children:e.name},e._id))]}),i("select",{name:"branch",className:"block border border-grey-light w-full p-3 rounded mb-4 uppercase",value:d,onChange:e=>{g(e.target.value)},children:[t("option",{value:"",className:"block border border-grey-light w-full p-3 rounded mb-4 ",disabled:!0,children:"Select Class/Branch"}),w.map(e=>t("option",{value:e._id,className:"block border border-grey-light w-full p-3 rounded mb-4",children:e.name},e._id))]}),i("select",{name:" subject",value:b,onChange:e=>{p(e.target.value)},className:"block border border-grey-light w-full p-3 rounded mb-4 uppercase",children:[t("option",{value:"",className:"block border border-grey-light w-full p-3 rounded mb-4",disabled:!0,children:"Select Subject"}),x.map(e=>t("option",{value:e._id,className:"block border border-grey-light w-full p-3 rounded mb-4",children:e.name},e._id))]}),t("label",{htmlFor:"videoName",className:" font-medium",children:"Enter the name of video"}),t("input",{type:"text",name:"videoName",className:"w-full p-3 mb-2",placeholder:"Enter video name",value:o.videoName,onChange:e=>{k({...o,videoName:e.target.value})}})," ",t("br",{}),t("label",{htmlFor:"videoLink",className:" font-medium",children:"Paste video link(Embed link, eg:https://www.youtube.com/embed/g523Bj0y36Q)"}),t("input",{type:"text",name:"videoLink",className:"w-full p-3 mb-2",placeholder:"Paste video link",value:o.videoLink,onChange:e=>{k({...o,videoLink:e.target.value})}}),i("p",{children:[" ","*These videos will be published only ",t("br",{})," after admin verification"]}),t(_,{isLoading:j,type:"submit",className:"bg-gray-600 p-3 font-semibold text-white rounded-lg mt-2",children:"UPLOAD VIDEO"})]})]}),t("div",{className:"mt-5",children:t(D,{})})]})};export{O as default};
