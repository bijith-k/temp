import{u as T,b as q,r as a,e as B,d as m,j as n,c as t,B as E}from"./index-75e0cb1c.js";import{N as I,F as _}from"./Footer-9eebb72f.js";import"./index.esm-ed29fecc.js";import"./index.esm-21486a75.js";import"./index.esm-b2e70fb2.js";import"./logoWhite-701db893.js";const $=()=>{const r=T(),s=q(),[S,x]=a.useState([]),[y,f]=a.useState([]),[l,k]=a.useState(""),[i,g]=a.useState(""),[p,b]=a.useState(""),[w,v]=a.useState([]),[o,N]=a.useState({examName:"",questions:null}),[C,h]=a.useState(null),{tutor:d}=B(e=>e.tutor);a.useEffect(()=>{d.approved==!1&&d.rejected==!1?r("/tutor/approval-pending"):d.rejected?r("/tutor/approval-rejected"):d.blocked&&(localStorage.removeItem("Ttoken"),r("/tutor"),s({title:"Blocked",description:"Your account is blocked by the admin",status:"error",duration:5e3,isClosable:!0,position:"top"}))},[]),a.useEffect(()=>{m("Ttoken").get("tutor/boards").then(e=>{e.data.status==!1?(s({title:e.data.message,status:"error",duration:5e3,isClosable:!0,position:"top"}),localStorage.removeItem("Ttoken"),r("/tutor")):x(e.data.boards)}).catch(e=>{console.error(e),s({title:e.message,status:"error",duration:5e3,isClosable:!0,position:"top"})})},[]),a.useEffect(()=>{l?(g(""),b(""),m("Ttoken").get(`tutor/branches?board=${l}`).then(e=>{e.data.status==!1?(localStorage.removeItem("Ttoken"),r("/tutor")):f(e.data.branches)}).catch(e=>{console.log(e),s({title:e.message,status:"error",duration:5e3,isClosable:!0,position:"top"})})):f([])},[l]),a.useEffect(()=>{i?(b(""),m("Ttoken").get(`tutor/subjects?branch=${i}`).then(e=>{e.data.status==!1?(localStorage.removeItem("Ttoken"),r("/tutor")):v(e.data.subjects)}).catch(e=>{console.log(e),s({title:e.message,status:"error",duration:5e3,isClosable:!0,position:"top"})})):v([])},[i,l]);const u=e=>{s({title:e,status:"warning",duration:5e3,isClosable:!0,position:"top"})};return n("div",{className:"bg-gray-400 min-h-screen max-w-screen-2xl mx-auto w-full",children:[t(I,{}),n("div",{className:"",children:[t("div",{className:"bg-gray-600",children:t("h1",{className:"font-bold text-white text-center text-lg uppercase h-12 p-2",children:"upload question papers"})}),n("form",{action:"",onSubmit:async e=>{if(e.preventDefault(),!l){u("Select a board");return}if(!i){u("Select a branch");return}if(!p){u("Select a subject");return}const j=/^[a-zA-Z0-9_-\s]+$/;if(!o.examName||!j.test(o.examName)){u("Enter the name of the exam");return}if(!o.questions||o.questions.type!=="application/pdf"){u("Select a question paper to upload or You have selected a file otherthan pdf");return}h(!0),await m("Ttoken").post("tutor/upload-question-papers",{...o,board:l,branch:i,subject:p,exclusive:!0},{headers:{"Content-Type":"multipart/form-data"}}).then(c=>{h(!1),c.data.uploaded?r("/tutor/uploads"):s({title:c.data.message,status:"error",duration:5e3,isClosable:!0,position:"top"})}).catch(c=>{h(!1),console.log(c),s({title:c.message,status:"error",duration:5e3,isClosable:!0,position:"top"})})},className:"m-3 w-3/4 mx-auto",children:[n("select",{name:"board",value:l,onChange:e=>{k(e.target.value)},className:"block border border-grey-light w-full p-3 rounded mb-4 uppercase",children:[t("option",{value:"",className:"block border border-grey-light w-full p-3 rounded mb-4",disabled:!0,children:"Select Board/University"}),S.map(e=>t("option",{value:e._id,className:"block border border-grey-light w-full p-3 rounded mb-4 uppercase",children:e.name},e._id))]}),n("select",{name:"branch",className:"block border border-grey-light w-full p-3 rounded mb-4 uppercase",value:i,onChange:e=>{g(e.target.value)},children:[t("option",{value:"",className:"block border border-grey-light w-full p-3 rounded mb-4 ",disabled:!0,children:"Select Class/Branch"}),y.map(e=>t("option",{value:e._id,className:"block border border-grey-light w-full p-3 rounded mb-4",children:e.name},e._id))]}),n("select",{name:" subject",value:p,onChange:e=>{b(e.target.value),setErrors(null)},className:"block border border-grey-light w-full p-3 rounded mb-4 uppercase",children:[t("option",{value:"",className:"block border border-grey-light w-full p-3 rounded mb-4",disabled:!0,children:"Select Subject"}),w.map(e=>t("option",{value:e._id,className:"block border border-grey-light w-full p-3 rounded mb-4",children:e.name},e._id))]}),t("label",{htmlFor:"examName",className:" font-medium",children:"Enter the name of exam"}),t("input",{type:"text",name:"examName",className:"w-full p-3 mb-2",placeholder:"Enter exam name",value:o.examName,onChange:e=>{N({...o,examName:e.target.value})}})," ",t("br",{}),t("label",{htmlFor:"questions",className:" font-medium",children:"Select the file"}),t("input",{type:"file",name:"questions",className:"w-full bg-white p-2",onChange:e=>{N({...o,questions:e.target.files[0]})}}),n("p",{children:[" ","*These question paper will be published only ",t("br",{})," after admin verification"]}),t(E,{isLoading:C,type:"submit",className:"bg-gray-600 p-3 font-semibold text-white rounded-lg mt-2",children:"UPLOAD QUESTION PAPER"})]})]}),t("div",{className:"mt-5",children:t(_,{})})]})};export{$ as default};
