import{b as v,r as s,u as x,d as c,j as l,c as t}from"./index-75e0cb1c.js";import{S as C}from"./Sidebar-33147c50.js";import"./index.esm-efe2c39d.js";import"./index.esm-ed29fecc.js";import"./index.esm-b2e70fb2.js";import"./index.esm-90dfe48c.js";import"./index.esm-21486a75.js";const E=()=>{const a=v(),[h,g]=s.useState([]),[f,u]=s.useState([]),[o,m]=s.useState(""),[i,b]=s.useState(""),[n,p]=s.useState(""),d=x();return s.useEffect(()=>{c("Adtoken").get("admin/boards").then(e=>{e.data.status==!1?(a({title:e.data.message,status:"error",duration:5e3,isClosable:!0,position:"top"}),localStorage.removeItem("Adtoken"),d("/admin")):g(e.data.boards)}).catch(e=>{console.error(e),a({title:e.message,status:"error",duration:5e3,isClosable:!0,position:"top"})})},[]),s.useEffect(()=>{o?c("Adtoken").get(`admin/branches?board=${o}`).then(e=>{u(e.data.branches)}).catch(e=>{console.log(e)}):u([])},[o]),l("div",{className:"bg-sky-900 min-h-screen max-w-screen-2xl mx-auto flex overflow-x-hidden",children:[t("div",{className:"bg-dark-purple",children:t(C,{})}),l("div",{className:"w-full mt-10",children:[t("h1",{className:"text-center text-black  font-extrabold bg-white p-3 ",children:"ADD SUBJECT"}),l("form",{action:"",onSubmit:e=>{e.preventDefault();const S=/^[a-zA-Z0-9]+([ \-'][a-zA-Z0-9]+)*$/;if(!o)return a({title:"Please select a board",status:"warning",duration:5e3,isClosable:!0,position:"top"});if(!i)return a({title:"Please select a branch",status:"warning",duration:5e3,isClosable:!0,position:"top"});if(!n||!S.test(n))return a({title:"Please enter the subject name",description:"Don't start name with spaces",status:"warning",duration:5e3,isClosable:!0,position:"top"});c("Adtoken").post("admin/add-subject",{board:o,branch:i,subject:n}).then(r=>{r.data.status==!1?(a({title:r.data.message,status:"error",duration:5e3,isClosable:!0,position:"top"}),localStorage.removeItem("Adtoken"),d("/admin")):(a({title:r.data.message,status:"success",duration:5e3,isClosable:!0,position:"top"}),m(""),b(""),p(""),d("/admin/subject"))}).catch(r=>{a({title:r.message,status:"success",duration:5e3,isClosable:!0,position:"top"}),console.error(r,"err")})},className:"flex flex-col mx-auto w-3/4 mt-8",children:[l("select",{id:"board",value:o,onChange:e=>m(e.target.value),className:"block border border-grey-light w-full p-3 rounded mb-4 uppercase",children:[t("option",{value:"",disabled:!0,children:"Select Board"}),h.map(e=>t("option",{value:e._id,children:e.name},e._id))]}),l("select",{id:"branch",value:i,onChange:e=>b(e.target.value),className:"block border border-grey-light w-full p-3 rounded mb-4 uppercase",children:[t("option",{value:"",disabled:!0,children:"Select Branch"}),f.map(e=>t("option",{value:e._id,children:e.name},e._id))]}),t("input",{type:"text",placeholder:"Enter subject name",value:n,onChange:e=>p(e.target.value),id:"subjectName",className:"block border border-grey-light w-full p-3 rounded mb-4 uppercase"}),t("button",{type:"submit",className:"bg-gray-300 text-sky-900 p-3 font-semibold rounded-lg mt-2",children:"ADD SUBJECT"})]})]})]})};export{E as default};
