import{u as j,r as a,b as q,d,j as i,c as t,N as B,B as E}from"./index-75e0cb1c.js";import{H as _}from"./Header-318919e1.js";import{H as T}from"./HeadTitle-2e5ed730.js";import{F as D}from"./Footer-62cbe905.js";import"./logoWhite-701db893.js";const L=()=>{const b=j(),[N,v]=a.useState([]),[x,h]=a.useState([]),[l,w]=a.useState(""),[r,f]=a.useState(""),[c,m]=a.useState(""),[y,g]=a.useState([]),[s,S]=a.useState({examName:"",questions:null}),o=q(),[C,p]=a.useState(null);a.useEffect(()=>{d("Stoken").get("boards").then(e=>{e.data.status==!1?(o({title:e.data.message,status:"error",duration:5e3,isClosable:!0,position:"top"}),localStorage.removeItem("Stoken"),b("/signin")):v(e.data.boards)}).catch(e=>{console.error(e),o({title:e.message,status:"error",duration:5e3,isClosable:!0,position:"top"})})},[]),a.useEffect(()=>{l?(f(""),m(""),d("Stoken").get(`branches?board=${l}`).then(e=>{h(e.data.branches)}).catch(e=>{console.log(e),o({title:e.message,status:"error",duration:5e3,isClosable:!0,position:"top"})})):h([])},[l]),a.useEffect(()=>{r?(m(""),d("Stoken").get(`subjects?branch=${r}`).then(e=>{g(e.data.subjects)}).catch(e=>{console.log(e),o({title:e.message,status:"error",duration:5e3,isClosable:!0,position:"top"})})):g([])},[r,l]);const u=e=>{o({title:e,status:"warning",duration:5e3,isClosable:!0,position:"top"})};return i("div",{className:"bg-[#d4d8f0] min-h-screen max-w-screen-2xl mx-auto pt-16 w-full overflow-x-hidden",children:[t(B,{}),t(_,{}),t(T,{title:"upload question papers"}),i("form",{action:"",onSubmit:async e=>{if(e.preventDefault(),!l){u("Select a board");return}if(!r){u("Select a branch");return}if(!c){u("Select a subject");return}const k=/^[a-zA-Z0-9_-\s]+$/;if(!s.examName||!k.test(s.examName)){u("Enter the name of the exam");return}if(!s.questions||s.questions.type!=="application/pdf"){u("Select a question paper to upload or You have selected a file otherthan pdf");return}p(!0),await d("Stoken").post("upload-question-papers",{...s,board:l,branch:r,subject:c,exclusive:!1},{headers:{"Content-Type":"multipart/form-data"}}).then(n=>{p(!1),n.data.uploaded?(o({title:n.data.message,status:"success",duration:5e3,isClosable:!0,position:"top"}),b("/my-uploads")):o({title:n.data.message,status:"error",duration:5e3,isClosable:!0,position:"top"})}).catch(n=>{p(!1),console.log(n),o({title:n.message,status:"error",duration:5e3,isClosable:!0,position:"top"})})},className:"m-3 w-3/4 mx-auto",children:[i("select",{name:"board",value:l,onChange:e=>{w(e.target.value)},className:"block border border-grey-light w-full p-3 rounded mb-4 uppercase",children:[t("option",{value:"",className:"block border border-grey-light w-full p-3 rounded mb-4",disabled:!0,children:"Select Board/University"}),N.map(e=>t("option",{value:e._id,className:"block border border-grey-light w-full p-3 rounded mb-4 uppercase",children:e.name},e._id))]}),i("select",{name:"branch",className:"block border border-grey-light w-full p-3 rounded mb-4 uppercase",value:r,onChange:e=>{f(e.target.value)},children:[t("option",{value:"",className:"block border border-grey-light w-full p-3 rounded mb-4 ",disabled:!0,children:"Select Class/Branch"}),x.map(e=>t("option",{value:e._id,className:"block border border-grey-light w-full p-3 rounded mb-4",children:e.name},e._id))]}),i("select",{name:" subject",value:c,onChange:e=>{m(e.target.value)},className:"block border border-grey-light w-full p-3 rounded mb-4 uppercase",children:[t("option",{value:"",className:"block border border-grey-light w-full p-3 rounded mb-4",disabled:!0,children:"Select Subject"}),y.map(e=>t("option",{value:e._id,className:"block border border-grey-light w-full p-3 rounded mb-4",children:e.name},e._id))]}),t("label",{htmlFor:"examName",className:" font-medium",children:"Enter the name of exam"}),t("input",{type:"text",name:"examName",className:"w-full p-3 mb-2",placeholder:"Enter exam name",value:s.examName,onChange:e=>{S({...s,examName:e.target.value})}})," ",t("br",{}),t("label",{htmlFor:"questions",className:" font-medium",children:"Select the file"}),t("input",{type:"file",name:"questions",className:"w-full bg-white p-2",onChange:e=>{S({...s,questions:e.target.files[0]})}}),i("p",{children:[" ","*These question paper will be published only ",t("br",{})," after admin verification"]}),t(E,{isLoading:C,type:"submit",className:"bg-[#232946] p-3 font-semibold text-white rounded-lg mt-2",children:"UPLOAD QUESTION PAPER"})]}),t("div",{className:"mt-5",children:t(D,{})})]})};export{L as default};
