import{u as v,b as f,r as b,j as m,c as e,N,B as x,d as D}from"./index-75e0cb1c.js";import{c as w,a as o,d as y,u as k}from"./index.esm-7cbbfad3.js";import{H as C}from"./Header-318919e1.js";import{H as F}from"./HeadTitle-2e5ed730.js";import{F as B}from"./Footer-62cbe905.js";import"./logoWhite-701db893.js";const P={name:"",organizer:"",location:"",description:"",startingDate:"",endingDate:"",link:"",contact:"",poster:""},$=()=>{const u=v(),d=f(),[p,c]=b.useState(null),h=w({name:o().min(2).max(25).required("Please enter the events name"),organizer:o().min(2).max(50).required("Please enter the organizers/institutions name"),location:o().min(2).required("Please enter the location"),description:o().min(2).required("Please add some description of event"),startingDate:o().required("Please select the starting date"),endingDate:o().required("Please select the ending date"),link:o().required("Please add the link or website for registration"),contact:o().matches(/^[0-9]{10}$/,"contact number is not valid").required("Please enter a contact number"),poster:y().required("Please select a poster").test("fileType","Unsupported file type",t=>t&&["image/jpeg","image/png"].includes(t.type))}),{values:r,setFieldValue:n,errors:a,touched:i,handleBlur:l,handleSubmit:g}=k({initialValues:P,validationSchema:h,onSubmit:(t,z)=>{c(!0),D("Stoken").post("add-event",{...t},{headers:{"Content-Type":"multipart/form-data"}}).then(s=>{c(!1),s.data.added?(d({title:s.data.message,status:"success",duration:5e3,isClosable:!0,position:"top"}),u("/events")):s.data.status==!1?(d({title:s.data.message,status:"error",duration:5e3,isClosable:!0,position:"top"}),localStorage.removeItem("Stoken"),u("/signin")):d({title:s.data.message,status:"error",duration:5e3,isClosable:!0,position:"top"})}).catch(s=>{c(!1),console.log(s),d({title:s.response.data.errors,status:"error",duration:5e3,isClosable:!0,position:"top"})})}});return m("div",{className:"bg-[#d4d8f0]  min-h-screen max-w-screen-2xl mx-auto pt-16 w-full overflow-x-hidden",children:[e(N,{}),e(C,{}),e(F,{title:"add events"}),m("form",{action:"",onSubmit:g,className:"p-3 w-3/4 mx-auto",children:[e("label",{htmlFor:"eventName",className:" font-medium",children:"Enter the name of event"}),e("input",{type:"text",name:"name",className:"w-full p-3 mb-2",placeholder:"Type here...............",value:r.name,onBlur:l,onChange:t=>{n("name",t.target.value)}}),i.name&&a.name&&e("div",{className:"text-red-500",children:a.name}),e("label",{htmlFor:"organizer",className:" font-medium",children:"Enter the name of organizer"}),e("input",{type:"text",name:"organizer",className:"w-full p-3 mb-2",placeholder:"Type here...............",value:r.organizer,onBlur:l,onChange:t=>{n("organizer",t.target.value)}}),i.organizer&&a.organizer&&e("div",{className:"text-red-500",children:a.organizer}),e("label",{htmlFor:"location",className:" font-medium",children:"Enter the location"}),e("input",{type:"text",name:"location",className:"w-full p-3 mb-2",placeholder:"Type here...............",value:r.location,onBlur:l,onChange:t=>{n("location",t.target.value)}}),i.location&&a.location&&e("div",{className:"text-red-500",children:a.location}),e("label",{htmlFor:"description",className:" font-medium",children:"Write a short description about the event"}),e("textarea",{name:"description",id:"",className:"w-full p-3 mb-2",rows:"3",value:r.description,placeholder:"Type here....",onBlur:l,onChange:t=>{n("description",t.target.value)}}),i.description&&a.description&&e("div",{className:"text-red-500",children:a.description}),e("label",{htmlFor:"startingDate",className:" font-medium",children:"Event starting date"}),e("input",{type:"date",name:"startingDate",className:"w-full p-3 mb-2",value:r.startingDate,onBlur:l,onChange:t=>{n("startingDate",t.target.value)}}),i.startingDate&&a.startingDate&&e("div",{className:"text-red-500",children:a.startingDate}),e("label",{htmlFor:"endingDate",className:" font-medium",children:"Event ending date"}),e("input",{type:"date",name:"endingDate",className:"w-full p-3 mb-2",value:r.endingDate,onBlur:l,onChange:t=>{n("endingDate",t.target.value)}}),i.endingDate&&a.endingDate&&e("div",{className:"text-red-500",children:a.endingDate}),e("label",{htmlFor:"link",className:" font-medium",children:"Paste the registration link/website"}),e("input",{type:"text",name:"link",className:"w-full p-3 mb-2",placeholder:"Paste here...............",value:r.link,onBlur:l,onChange:t=>{n("link",t.target.value)}}),i.link&&a.link&&e("div",{className:"text-red-500",children:a.link}),e("label",{htmlFor:"contact",className:" font-medium",children:"Contact number"}),e("input",{type:"text",name:"contact",className:"w-full p-3 mb-2",placeholder:"Type here...............",value:r.contact,onBlur:l,onChange:t=>{n("contact",t.target.value)}}),i.contact&&a.contact&&e("div",{className:"text-red-500",children:a.contact}),e("label",{htmlFor:"poster",className:" font-medium block",children:"Poster of the event"}),e("input",{type:"file",name:"poster",className:"w-full bg-white p-2",onBlur:l,onChange:t=>{n("poster",t.target.files[0])}}),i.poster&&a.poster&&e("div",{className:"text-red-500",children:a.poster}),m("p",{className:"mt-2",children:[" ","*These events will be published only ",e("br",{})," after admin verification"]}),e(x,{isLoading:p,type:"submit",className:"bg-[#232946] p-3 font-semibold text-white rounded-lg mt-2",children:"ADD EVENT"})]}),e("div",{className:"mt-5",children:e(B,{})})]})};export{$ as default};
