import{b as M,r as i,l as O,u as B,d as m,j as o,c as a,t as R,M as y,m as F,ae as E,n as $,B as N}from"./index-75e0cb1c.js";import{S as _}from"./Sidebar-33147c50.js";import{T as D,a as L,b as P,c as f,d as l,e as K,f as r}from"./chunk-Z3IFIKNA-83e1cc00.js";import{a as U,M as H}from"./chunk-YI7XFFAC-b56ce92b.js";import{F as J}from"./chunk-IJBC3YLI-ecd8dcc2.js";import{F as V}from"./chunk-RN6VKE3K-3067924d.js";import{I as q}from"./chunk-GYFRIY2Z-587d8fc4.js";import"./index.esm-efe2c39d.js";import"./index.esm-ed29fecc.js";import"./index.esm-b2e70fb2.js";import"./index.esm-90dfe48c.js";import"./index.esm-21486a75.js";const le=()=>{const t=M(),[h,p]=i.useState(""),{isOpen:C,onOpen:k,onClose:d}=O(),v=e=>{k(),p(e)},[b,u]=i.useState(""),c=B(),[x,T]=i.useState([]),[w,n]=i.useState("");i.useEffect(()=>{m("Adtoken").get("admin/tutors").then(e=>{e.data.status==!1?(t({title:e.data.message,status:"error",duration:5e3,isClosable:!0,position:"top"}),localStorage.removeItem("Adtoken"),c("/admin")):T(e.data)}).catch(e=>{console.log(e),t({title:e.message,status:"error",duration:5e3,isClosable:!0,position:"top"})})},[w]);const g=e=>{m("Adtoken").put(`admin/block-unblock-tutor?tutor=${e}`).then(s=>{s.data.status==!1?(t({title:s.data.message,status:"error",duration:5e3,isClosable:!0,position:"top"}),localStorage.removeItem("Adtoken"),c("/admin")):(n(`Clicked at ${new Date().toISOString()}`),t({title:s.data.message,status:"success",duration:5e3,isClosable:!0,position:"top"}))}).catch(s=>{console.log(s),n(e),t({title:s.message,status:"error",duration:5e3,isClosable:!0,position:"top"})})},S=e=>{m("Adtoken").put(`admin/approve-tutor?tutor=${e}`).then(s=>{s.data.status==!1?(t({title:s.data.message,status:"error",duration:5e3,isClosable:!0,position:"top"}),localStorage.removeItem("Adtoken"),c("/admin")):(n(`Clicked at ${new Date().toISOString()}`),t({title:s.data.message,status:"success",duration:5e3,isClosable:!0,position:"top"}))}).catch(s=>{console.log(s),n(e),t({title:s.message,status:"error",duration:5e3,isClosable:!0,position:"top"})})},j=()=>{m("Adtoken").post(`admin/reject-tutor?tutor=${h}`,{rejectionReason:b}).then(e=>{e.data.status==!1?(t({title:e.data.message,status:"error",duration:5e3,isClosable:!0,position:"top"}),localStorage.removeItem("Adtoken"),c("/admin")):(n(`Clicked at ${new Date().toISOString()}`),t({title:e.data.message,status:"success",duration:5e3,isClosable:!0,position:"top"}),u(""),p(""),d())}).catch(e=>{console.log(e),n(h),t({title:e.message,status:"error",duration:5e3,isClosable:!0,position:"top"}),u(""),p(""),d()})};return o("div",{className:"bg-sky-900 min-h-screen max-w-screen-2xl mx-auto flex overflow-x-hidden",children:[a("div",{className:"bg-dark-purple",children:a(_,{})}),o("div",{className:"w-full overflow-clip",children:[a("p",{className:"bg-white w-full p-3 my-5 uppercase font-bold text-center",children:"manage tutors"}),a(D,{className:"rounded-2xl mt-3",children:o(L,{variant:"simple",children:[a(P,{children:o(f,{className:"bg-green-300",children:[a(l,{isNumeric:!0,className:"p-3 border",children:"No"}),a(l,{className:"p-3 border",children:"Name"}),a(l,{className:"p-3 border",children:"Email"}),a(l,{className:"p-3 border",children:"Phone"}),a(l,{className:"p-3 border",children:"Available Time,From"}),a(l,{className:"p-3 border",children:"Available Time,To"}),a(l,{className:"p-3 border",children:"Subjects"}),a(l,{className:"p-3 border",children:"Board"}),a(l,{className:"p-3 border",children:"Branch"}),a(l,{className:"p-3 border",children:"Profession"}),a(l,{className:"p-3 border",children:"Actions"})]})}),a(K,{className:"text-center",children:x.map((e,s)=>o(f,{className:"bg-white ",children:[a(r,{isNumeric:!0,className:"border",children:s+1}),a(r,{className:"border uppercase",children:e.name}),a(r,{className:"border",children:e.email}),a(r,{className:"border",children:e.phone}),a(r,{className:"border",children:e.timeFrom}),a(r,{className:"border",children:e.timeTo}),a(r,{className:"border",children:e.subjects.map((A,I)=>o("span",{children:[A,","]},I))}),a(r,{className:"border",children:e.board.name}),a(r,{className:"border",children:e.branch.name}),a(r,{className:"border",children:e.profession}),o(r,{className:"border flex justify-start",children:[!e.approved&&!e.rejected?a("button",{className:"bg-green-500 font-semibold text-white m-2 w-24 p-2 rounded-xl",onClick:()=>S(e._id),children:"APPROVE"}):null,!e.approved&&!e.rejected?a("button",{className:"bg-red-500 font-semibold text-white m-2 w-24 p-2 rounded-xl",onClick:()=>v(e._id),children:"REJECT"}):null,e.approved?e.blocked?a("button",{className:"bg-green-700 font-semibold text-white m-2 w-24 p-2 rounded-xl",onClick:()=>g(e._id),children:"UNBLOCK"}):a("button",{className:"bg-red-700 font-semibold text-white m-2 w-24 p-2 rounded-xl",onClick:()=>g(e._id),children:"BLOCK"}):null]})]},e._id))})]})})]}),o(R,{isOpen:C,onClose:d,children:[a(y,{}),o(U,{children:[a(F,{children:"Reason for rejection"}),a(E,{}),a($,{pb:6,children:o(J,{children:[a(V,{children:"Add the reason"}),a(q,{placeholder:"Type here...",value:b,onChange:e=>u(e.target.value)})]})}),o(H,{children:[a(N,{colorScheme:"red",mr:3,onClick:j,children:"Reject"}),a(N,{onClick:d,children:"Cancel"})]})]})]})]})};export{le as default};
