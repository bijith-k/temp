import{b as g,u as b,r,d as m,j as s,c as a}from"./index-75e0cb1c.js";import{S as x}from"./Sidebar-33147c50.js";import"./index.esm-efe2c39d.js";import"./index.esm-ed29fecc.js";import"./index.esm-b2e70fb2.js";import"./index.esm-90dfe48c.js";import"./index.esm-21486a75.js";const k=()=>{const n=g();localStorage.getItem("Adtoken");const p=localStorage.getItem("planId"),d=b(),[u,i]=r.useState(null),[e,o]=r.useState({plan:"",duration:"",price:""});return r.useEffect(()=>{m("Adtoken").get(`admin/plans?id=${p}`).then(t=>{t.data.status==!1?(n({title:t.data.message,status:"error",duration:5e3,isClosable:!0,position:"top"}),localStorage.removeItem("Adtoken"),d("/admin")):o({plan:t.data.plan,duration:t.data.duration,price:t.data.price})}).catch(t=>{console.log(t),n({title:t.message,status:"error",duration:5e3,isClosable:!0,position:"top"})})},[]),s("div",{className:"bg-sky-900 min-h-screen max-w-screen-2xl mx-auto flex overflow-x-hidden",children:[a("div",{className:"bg-dark-purple",children:a(x,{})}),s("div",{className:"w-full  overflow-clip",children:[a("p",{className:"bg-white w-full p-3 my-5 uppercase font-bold text-center",children:"edit plan"}),a("div",{children:s("form",{action:"",onSubmit:async t=>{t.preventDefault();const c=/^[a-zA-Z0-9_-\s]+$/;if(!e.plan||!c.test(e.plan))return n({title:"Enter the name of the plan",status:"warning",duration:5e3,isClosable:!0,position:"top"});const h=/^1[0-2]$|^[1-9]$/;if(!e.duration||!h.test(e.duration))return n({title:"Enter the duration in number of months",status:"warning",duration:5e3,isClosable:!0,position:"top"});const f=/^[1-9]\d*(\.\d{1,2})?$/;if(!e.price||!f.test(e.price))return n({title:"Enter price for the plan",status:"warning",duration:5e3,isClosable:!0,position:"top"});await m("Adtoken").post(`admin/edit-plans?plan=${p}`,{...e}).then(l=>{l.data.updated?(localStorage.removeItem("planId"),d("/admin/plans")):n({title:l.data.message,status:"error",duration:5e3,isClosable:!0,position:"top"})}).catch(l=>{console.log(l),n({title:l.message,status:"error",duration:5e3,isClosable:!0,position:"top"})})},className:"m-3 w-3/4 mx-auto",children:[u?a("p",{className:" text-red-500 font-normal bg-white border-2 border-red-500  my-2 w-fit rounded-xl p-2 mx-auto",children:u}):null,a("label",{htmlFor:"plan",className:" font-medium text-white",children:"Edit the name of plan"}),a("input",{type:"text",name:"plan",className:"w-full p-3 mb-2",placeholder:"Enter name of plan",value:e.plan,onChange:t=>{o({...e,plan:t.target.value}),i(null)}}),a("label",{htmlFor:"duration",className:" font-medium text-white",children:"Edit the duration of the plan"}),a("input",{type:"text",name:"duration",className:"w-full p-3 mb-2",placeholder:"Enter duration of plan",value:e.duration,onChange:t=>{o({...e,duration:t.target.value}),i(null)}}),a("label",{htmlFor:"price",className:" font-medium text-white",children:"Edit the price of plan"}),a("input",{type:"text",name:"price",className:"w-full p-3 mb-2",placeholder:"Enter price of plan",value:e.price,onChange:t=>{o({...e,price:t.target.value}),i(null)}}),a("button",{type:"submit",className:"bg-dark-purple p-3 font-semibold text-white rounded-lg mt-2",children:"EDIT PLAN"})]})})]})]})};export{k as default};
