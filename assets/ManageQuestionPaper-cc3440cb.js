import{b as T,r as i,l as A,u as M,d as m,j as s,c as t,F as y,t as O,M as $,m as R,ae as D,n as F,B as g}from"./index-75e0cb1c.js";import{S as _}from"./Sidebar-33147c50.js";import{T as B,a as E,b as L,c as f,d as r,e as P,f as n}from"./chunk-Z3IFIKNA-83e1cc00.js";import{a as Q,M as U}from"./chunk-YI7XFFAC-b56ce92b.js";import{F as V}from"./chunk-IJBC3YLI-ecd8dcc2.js";import{F as H}from"./chunk-RN6VKE3K-3067924d.js";import{I as J}from"./chunk-GYFRIY2Z-587d8fc4.js";import"./index.esm-efe2c39d.js";import"./index.esm-ed29fecc.js";import"./index.esm-b2e70fb2.js";import"./index.esm-90dfe48c.js";import"./index.esm-21486a75.js";const oe=()=>{const o=T(),[N,p]=i.useState(""),{isOpen:C,onOpen:x,onClose:d}=A(),k=e=>{x(),p(e)},[h,u]=i.useState(""),[S,w]=i.useState([]),c=M(),[v,l]=i.useState("");i.useEffect(()=>{m("Adtoken").get("admin/question-papers").then(e=>{e.data.status==!1?(o({title:e.data.message,status:"error",duration:5e3,isClosable:!0,position:"top"}),localStorage.removeItem("Adtoken"),c("/admin")):w(e.data)})},[v]);const I=e=>{m("Adtoken").get(`admin/approve-question-paper?question=${e}`).then(a=>{a.data.status==!1?(o({title:a.data.message,status:"error",duration:5e3,isClosable:!0,position:"top"}),localStorage.removeItem("Adtoken"),c("/admin")):(l(`Clicked at ${new Date().toISOString()}`),o({title:a.data.message,status:"success",duration:5e3,isClosable:!0,position:"top"}))}).catch(a=>{console.log(a),l(`Clicked at ${new Date().toISOString()}`),o({title:a.message,status:"error",duration:5e3,isClosable:!0,position:"top"})})},j=()=>{m("Adtoken").post(`admin/reject-question-paper?question=${N}`,{rejectionReason:h}).then(e=>{e.data.status==!1?(o({title:e.data.message,status:"error",duration:5e3,isClosable:!0,position:"top"}),localStorage.removeItem("Adtoken"),c("/admin")):(l(`Clicked at ${new Date().toISOString()}`),o({title:e.data.message,status:"success",duration:5e3,isClosable:!0,position:"top"}),u(""),p(""),d())}).catch(e=>{console.log(e),l(`Clicked at ${new Date().toISOString()}`),o({title:e.message,status:"error",duration:5e3,isClosable:!0,position:"top"}),u(""),p(""),d()})},b=e=>{m("Adtoken").get(`admin/question-paper-list-unlist?question=${e}`).then(a=>{a.data.status==!1?(o({title:a.data.message,status:"error",duration:5e3,isClosable:!0,position:"top"}),localStorage.removeItem("Adtoken"),c("/admin")):(l(`Clicked at ${new Date().toISOString()}`),o({title:a.data.message,status:"success",duration:5e3,isClosable:!0,position:"top"}))}).catch(a=>{console.log(a),l(`Clicked at ${new Date().toISOString()}`),o({title:a.message,status:"error",duration:5e3,isClosable:!0,position:"top"})})};return s("div",{className:"bg-sky-900 min-h-screen max-w-screen-2xl mx-auto flex overflow-x-hidden",children:[t("div",{className:"bg-dark-purple",children:t(_,{})}),s("div",{className:"w-full  overflow-clip",children:[t("p",{className:"bg-white w-full p-3 my-5 uppercase font-bold text-center",children:"manage question papers"}),t("div",{className:"flex justify-around"}),t(B,{className:"rounded-2xl mt-3",children:s(E,{variant:"simple",children:[t(L,{children:s(f,{className:"bg-green-300 h-14",children:[t(r,{className:"p-3 border",children:"No"}),t(r,{className:"p-3 border",children:"Name of exam"}),t(r,{className:"p-3 border",children:"Name of subject"}),t(r,{className:"p-3 border",children:"Name of Branch"}),t(r,{className:"p-3 border",children:"Name of Board"}),t(r,{className:"p-3 border",children:"Actions"})]})}),t(P,{className:"text-center",children:S.map((e,a)=>s(f,{className:"bg-white uppercase",children:[t(n,{className:"border",children:a+1}),t(n,{className:"border",children:e.exam_name}),t(n,{className:"border",children:e.subject.name}),t(n,{className:"border",children:e.branch.name}),t(n,{className:"border",children:e.board.name}),s(n,{className:"border flex justify-start",children:[s("button",{className:"bg-sky-900 font-semibold text-white m-2 w-22 p-2 rounded-xl",children:[" ",t("a",{href:`http://localhost:4000/${e.file_path}`,target:"_blank",children:"VIEW"})," "]}),e.approved?t(y,{children:e.listed?t("button",{className:"bg-gray-600 font-semibold text-white m-2 w-22 p-2 rounded-xl",onClick:()=>b(e._id),children:"UNLIST"}):t("button",{className:"bg-sky-400 font-semibold text-white m-2 w-22 p-2 rounded-xl",onClick:()=>b(e._id),children:"LIST"})}):null,!e.approved&&!e.rejected?t("button",{className:"bg-green-500 font-semibold text-white m-2 w-22 p-2 rounded-xl",onClick:()=>I(e._id),children:"APPROVE"}):null,!e.approved&&!e.rejected?t("button",{className:"bg-red-500 font-semibold text-white m-2 w-22 p-2 rounded-xl",onClick:()=>k(e._id),children:"REJECT"}):null]})]},a))})]})})]}),s(O,{isOpen:C,onClose:d,children:[t($,{}),s(Q,{children:[t(R,{children:"Reason for rejection"}),t(D,{}),t(F,{pb:6,children:s(V,{children:[t(H,{children:"Add the reason"}),t(J,{placeholder:"Type here...",value:h,onChange:e=>u(e.target.value)})]})}),s(U,{children:[t(g,{colorScheme:"red",mr:3,onClick:j,children:"Reject"}),t(g,{onClick:d,children:"Cancel"})]})]})]})]})};export{oe as default};
