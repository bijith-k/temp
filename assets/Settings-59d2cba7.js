import{e as z,u as L,r as a,b as B,j as l,c as e,B as m,o as O,d as x}from"./index-75e0cb1c.js";import{N as R,F}from"./Footer-9eebb72f.js";import{I as p,b as v,a as A}from"./chunk-J356FWKS-814e3883.js";import{I as h}from"./chunk-GYFRIY2Z-587d8fc4.js";import"./index.esm-ed29fecc.js";import"./index.esm-21486a75.js";import"./index.esm-b2e70fb2.js";import"./logoWhite-701db893.js";import"./chunk-IJBC3YLI-ecd8dcc2.js";const J=()=>{const{tutor:d}=z(t=>t.tutor),n=L(),[g,P]=a.useState(!1),[w,E]=a.useState(!1),k=()=>P(!g),y=()=>E(!w),s=B();a.useEffect(()=>{d.approved==!1&&d.rejected==!1?n("/tutor/approval-pending"):d.rejected?n("/tutor/approval-rejected"):d.blocked&&(localStorage.removeItem("Ttoken"),n("/tutor"),s({title:"Blocked",description:"Your account is blocked by the admin",status:"error",duration:5e3,isClosable:!0,position:"top"}))},[]);const[N,c]=a.useState(!1),[I,u]=a.useState(!1),[o,b]=a.useState({currentPassword:"",newPassword:""}),[r,S]=a.useState(""),[f,C]=a.useState(""),T=async()=>{if(!o.currentPassword||!o.newPassword)return s({title:"Enter passwords",status:"error",duration:5e3,isClosable:!0,position:"bottom-right"});if(o.newPassword.length<6)return s({title:"Password should be atlest 6 character length",status:"error",duration:5e3,isClosable:!0,position:"bottom-right"});if(!r)return s({title:"Enter email to get otp for verification",status:"error",duration:5e3,isClosable:!0,position:"bottom-right"});if(!f)return s({title:"Enter otp got in email to continue",status:"error",duration:5e3,isClosable:!0,position:"bottom-right"});c(!0),await x("Ttoken").post("tutor/change-password",{...o,email:r,otp:f}).then(t=>{t.data.updated?(s({title:t.data.message,status:"success",duration:5e3,isClosable:!0,position:"bottom-right"}),c(!1),b({currentPassword:"",newPassword:""}),S(""),C(""),localStorage.removeItem("Ttoken"),n("/tutor")):t.data.status==!1?(s({title:t.data.message,status:"error",duration:5e3,isClosable:!0,position:"top"}),localStorage.removeItem("Ttoken"),n("/tutor")):(s({title:t.data.message,status:"error",duration:5e3,isClosable:!0,position:"bottom-right"}),c(!1))}).catch(t=>{console.log(t),s({title:t.message,status:"error",duration:5e3,isClosable:!0,position:"bottom-right"}),c(!1)})},j=async()=>{if(!r||!/^\S+@\S+\.\S+$/.test(r))return s({title:"Enter email",description:"Enter valid email only.Otp will be sent to that email",status:"error",duration:5e3,isClosable:!0,position:"bottom-right"});u(!0),await x("Ttoken").post("tutor/get-password-change-otp",{email:r}).then(i=>{i.data.otpSend?(s({title:i.data.message,status:"success",duration:5e3,isClosable:!0,position:"bottom-right"}),u(!1)):(s({title:i.data.message,status:"error",duration:5e3,isClosable:!0,position:"bottom-right"}),u(!1))}).catch(i=>{console.log(i),s({title:i.message,status:"error",duration:5e3,isClosable:!0,position:"bottom-right"}),u(!1)})};return l("div",{className:"bg-gray-50 min-h-screen max-w-screen-2xl mx-auto",children:[e(R,{}),e("div",{className:"bg-gray-600 uppercase h-14 text-center text-white font-bold text-xl pt-3",children:"SETTINGS"}),l("div",{className:"mt-5 w-2/3 mx-auto ",children:[l(p,{size:"md",children:[e(h,{pr:"4.5rem",type:g?"text":"password",placeholder:"Enter current password",value:o.currentPassword,onChange:t=>{b({...o,currentPassword:t.target.value})}}),e(v,{width:"4.5rem",children:e(m,{h:"1.75rem",size:"sm",onClick:k,children:g?"Hide":"Show"})})]}),l(p,{size:"md",className:"my-5",children:[e(h,{pr:"4.5rem",type:w?"text":"password",placeholder:"Enter new password",value:o.newPassword,onChange:t=>{b({...o,newPassword:t.target.value})}}),e(v,{width:"4.5rem",children:e(m,{h:"1.75rem",size:"sm",onClick:y,children:w?"Hide":"Show"})})]}),l(p,{children:[e(A,{pointerEvents:"none",children:e(O,{color:"gray.300"})}),e(h,{type:"email",value:r,onChange:t=>S(t.target.value),placeholder:"Enter email to get otp"}),e(v,{width:"7.5rem",children:e(m,{isLoading:I,h:"1.75rem",size:"sm",className:"mr-1",colorScheme:"teal",variant:"solid",onClick:j,children:"Click to get otp"})})]}),e(p,{size:"md",className:"mt-5",children:e(h,{pr:"4.5rem",type:"text",placeholder:"Enter the otp",value:f,onChange:t=>{C(t.target.value)}})}),e(m,{isLoading:N,loadingText:"Updating",colorScheme:"teal",variant:"solid",className:"mt-5",onClick:T,children:"UPDATE PASSWORD"})]}),e("div",{className:"mt-5",children:e(F,{})})]})};export{J as default};
