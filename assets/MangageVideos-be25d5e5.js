import{b as T,r as i,l as A,u as M,d as m,j as o,c as t,F as O,t as y,M as $,m as R,ae as D,n as F,B as g}from"./index-75e0cb1c.js";import{S as _}from"./Sidebar-33147c50.js";import{a as B,M as E}from"./chunk-YI7XFFAC-b56ce92b.js";import{T as V,a as L,b as P,c as f,d as n,e as U,f as r}from"./chunk-Z3IFIKNA-83e1cc00.js";import{F as H}from"./chunk-IJBC3YLI-ecd8dcc2.js";import{F as J}from"./chunk-RN6VKE3K-3067924d.js";import{I as W}from"./chunk-GYFRIY2Z-587d8fc4.js";import"./index.esm-efe2c39d.js";import"./index.esm-ed29fecc.js";import"./index.esm-b2e70fb2.js";import"./index.esm-90dfe48c.js";import"./index.esm-21486a75.js";const oe=()=>{const s=T(),[C,u]=i.useState(""),{isOpen:N,onOpen:k,onClose:d}=A(),S=e=>{k(),u(e)},[h,p]=i.useState(""),[w,x]=i.useState([]),c=M(),[v,l]=i.useState("");i.useEffect(()=>{m("Adtoken").get("admin/videos").then(e=>{e.data.status==!1?(s({title:e.data.message,status:"error",duration:5e3,isClosable:!0,position:"top"}),localStorage.removeItem("Adtoken"),c("/admin")):x(e.data)}).catch(e=>{console.log(e),s({title:e.message,status:"error",duration:5e3,isClosable:!0,position:"top"})})},[v]);const I=e=>{m("Adtoken").get(`admin/approve-videos?video=${e}`).then(a=>{a.data.status==!1?(s({title:a.data.message,status:"error",duration:5e3,isClosable:!0,position:"top"}),localStorage.removeItem("Adtoken"),c("/admin")):(l(`Clicked at ${new Date().toISOString()}`),s({title:a.data.message,status:"success",duration:5e3,isClosable:!0,position:"top"}))}).catch(a=>{console.log(a),l(`Clicked at ${new Date().toISOString()}`),s({title:a.message,status:"error",duration:5e3,isClosable:!0,position:"top"})})},j=()=>{m("Adtoken").post(`admin/reject-videos?video=${C}`,{rejectionReason:h}).then(e=>{e.data.status==!1?(s({title:e.data.message,status:"error",duration:5e3,isClosable:!0,position:"top"}),localStorage.removeItem("Adtoken"),c("/admin")):(l(`Clicked at ${new Date().toISOString()}`),s({title:e.data.message,status:"success",duration:5e3,isClosable:!0,position:"top"}),p(""),u(""),d())}).catch(e=>{console.log(e),l(`Clicked at ${new Date().toISOString()}`),s({title:e.message,status:"error",duration:5e3,isClosable:!0,position:"top"}),p(""),u(""),d()})},b=e=>{m("Adtoken").get(`admin/video-list-unlist?video=${e}`).then(a=>{a.data.status==!1?(s({title:a.data.message,status:"error",duration:5e3,isClosable:!0,position:"top"}),localStorage.removeItem("Adtoken"),c("/admin")):(l(`Clicked at ${new Date().toISOString()}`),s({title:a.data.message,status:"success",duration:5e3,isClosable:!0,position:"top"}))}).catch(a=>{console.log(a),l(`Clicked at ${new Date().toISOString()}`),s({title:a.message,status:"error",duration:5e3,isClosable:!0,position:"top"})})};return o("div",{className:"bg-sky-900 min-h-screen max-w-screen-2xl mx-auto flex overflow-x-hidden",children:[t("div",{className:"bg-dark-purple",children:t(_,{})}),o("div",{className:"w-full  overflow-clip",children:[t("p",{className:"bg-white w-full p-3 my-5 uppercase font-bold text-center",children:"manage videos"}),t(V,{className:"rounded-2xl mt-3",children:o(L,{variant:"simple",children:[t(P,{children:o(f,{className:"bg-green-300 h-14",children:[t(n,{className:"p-3 border",children:"No"}),t(n,{className:"p-3 border",children:"Name of video"}),t(n,{className:"p-3 border",children:"Name of subject"}),t(n,{className:"p-3 border",children:"Name of Branch"}),t(n,{className:"p-3 border",children:"Name of Board"}),t(n,{className:"p-3 border",children:"Actions"})]})}),t(U,{children:w.map((e,a)=>o(f,{className:"bg-white uppercase",children:[t(r,{className:"border",children:a+1}),t(r,{className:"border",children:e.video_name}),t(r,{className:"border",children:e.subject.name}),t(r,{className:"border",children:e.branch.name}),t(r,{className:"border",children:e.board.name}),o(r,{className:"border flex justify-start",children:[o("button",{className:"bg-sky-900 font-semibold text-white m-2 w-22 p-2 rounded-xl",children:[" ",t("a",{href:e.video_link,target:"_blank",children:"VIEW"})," "]}),e.approved?t(O,{children:e.listed?t("button",{className:"bg-gray-600 font-semibold text-white m-2 w-22 p-2 rounded-xl",onClick:()=>b(e._id),children:"UNLIST"}):t("button",{className:"bg-blue-400 font-semibold text-white m-2 w-22 p-2 rounded-xl",onClick:()=>b(e._id),children:"LIST"})}):null,!e.approved&&!e.rejected?t("button",{className:"bg-green-500 font-semibold text-white m-2 w-22 p-2 rounded-xl",onClick:()=>I(e._id),children:"APPROVE"}):null,!e.approved&&!e.rejected?t("button",{className:"bg-red-500 font-semibold text-white m-2 w-22 p-2 rounded-xl",onClick:()=>S(e._id),children:"REJECT"}):null]})]},a))})]})})]}),o(y,{isOpen:N,onClose:d,children:[t($,{}),o(B,{children:[t(R,{children:"Reason for rejection"}),t(D,{}),t(F,{pb:6,children:o(H,{children:[t(J,{children:"Add the reason"}),t(W,{placeholder:"Type here...",value:h,onChange:e=>p(e.target.value)})]})}),o(E,{children:[t(g,{colorScheme:"red",mr:3,onClick:j,children:"Reject"}),t(g,{onClick:d,children:"Cancel"})]})]})]})]})};export{oe as default};
