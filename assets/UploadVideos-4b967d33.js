import{u as B,r as a,b as L,d as c,j as d,c as t,N as E,B as _}from"./index-75e0cb1c.js";import{H as D}from"./Header-318919e1.js";import{H as A}from"./HeadTitle-2e5ed730.js";import{F}from"./Footer-62cbe905.js";import"./logoWhite-701db893.js";const $=()=>{const p=B(),[S,N]=a.useState([]),[k,h]=a.useState([]),[s,w]=a.useState(""),[l,v]=a.useState(""),[u,m]=a.useState(""),[y,g]=a.useState([]),[o,f]=a.useState({videoName:"",videoLink:""}),[x,b]=a.useState(null),r=L();a.useEffect(()=>{c("Stoken").get("boards").then(e=>{e.data.status==!1?(r({title:e.data.message,status:"error",duration:5e3,isClosable:!0,position:"top"}),localStorage.removeItem("Stoken"),p("/signin")):N(e.data.boards)}).catch(e=>{console.error(e),r({title:e.message,status:"error",duration:5e3,isClosable:!0,position:"top"})})},[]),a.useEffect(()=>{s?(v(""),m(""),c("Stoken").get(`branches?board=${s}`).then(e=>{h(e.data.branches)}).catch(e=>{console.log(e)})):h([])},[s]),a.useEffect(()=>{l?(m(""),c("Stoken").get(`subjects?branch=${l}`).then(e=>{g(e.data.subjects)}).catch(e=>{console.log(e)})):g([])},[l,s]);const n=e=>{r({title:e,status:"warning",duration:5e3,isClosable:!0,position:"top"})};return d("div",{className:"bg-[#d4d8f0] min-h-screen max-w-screen-2xl mx-auto pt-16 w-full overflow-x-hidden",children:[t(E,{}),t(D,{}),t(A,{title:"upload video"}),d("form",{action:"",onSubmit:async e=>{if(e.preventDefault(),!s){n("Select a board");return}if(!l){n("Select a branch");return}if(!u){n("Select a subject");return}const j=/^[a-zA-Z0-9_-\s]+$/;if(!o.videoName||!j.test(o.videoName)){n("Enter the name of the video");return}const C=/(?:https?:\/\/)?(?:www\.)?youtu(?:\.be|be\.com)\/(?:embed\/|v\/|watch\?v=)?([a-zA-Z0-9\-_]+)/;if(!o.videoLink||!C.test(o.videoLink)){n("Add youtube link of the video");return}b(!0),await c("Stoken").post("upload-videos",{...o,board:s,branch:l,subject:u,exclusive:!1}).then(i=>{b(!1),i.data.uploaded?(r({title:i.data.message,status:"success",duration:5e3,isClosable:!0,position:"top"}),p("/my-uploads")):r({title:i.data.message,status:"error",duration:5e3,isClosable:!0,position:"top"})}).catch(i=>{b(!1),console.log(i),r({title:i.message,status:"error",duration:5e3,isClosable:!0,position:"top"})})},className:"m-3 w-3/4 mx-auto",children:[d("select",{name:"board",value:s,onChange:e=>{w(e.target.value)},className:"block border border-grey-light w-full p-3 rounded mb-4 uppercase",children:[t("option",{value:"",className:"block border border-grey-light w-full p-3 rounded mb-4",disabled:!0,children:"Select Board/University"}),S.map(e=>t("option",{value:e._id,className:"block border border-grey-light w-full p-3 rounded mb-4 uppercase",children:e.name},e._id))]}),d("select",{name:"branch",className:"block border border-grey-light w-full p-3 rounded mb-4 uppercase",value:l,onChange:e=>{v(e.target.value)},children:[t("option",{value:"",className:"block border border-grey-light w-full p-3 rounded mb-4 ",disabled:!0,children:"Select Class/Branch"}),k.map(e=>t("option",{value:e._id,className:"block border border-grey-light w-full p-3 rounded mb-4",children:e.name},e._id))]}),d("select",{name:" subject",value:u,onChange:e=>{m(e.target.value)},className:"block border border-grey-light w-full p-3 rounded mb-4 uppercase",children:[t("option",{value:"",className:"block border border-grey-light w-full p-3 rounded mb-4",disabled:!0,children:"Select Subject"}),y.map(e=>t("option",{value:e._id,className:"block border border-grey-light w-full p-3 rounded mb-4",children:e.name},e._id))]}),t("label",{htmlFor:"videoName",className:" font-medium",children:"Enter the name of video"}),t("input",{type:"text",name:"videoName",className:"w-full p-3 mb-2",placeholder:"Enter video name",value:o.videoName,onChange:e=>{f({...o,videoName:e.target.value})}})," ",t("br",{}),t("label",{htmlFor:"videoLink",className:" font-medium",children:"Paste video link(Embed link, eg:https://www.youtube.com/embed/g523Bj0y36Q)"}),t("input",{type:"text",name:"videoLink",className:"w-full p-3 mb-2",placeholder:"Paste video link",value:o.videoLink,onChange:e=>{f({...o,videoLink:e.target.value})}}),d("p",{children:[" ","*These videos will be published only ",t("br",{})," after admin verification"]}),t(_,{isLoading:x,type:"submit",className:"bg-[#232946] p-3 font-semibold text-white rounded-lg mt-2",children:"UPLOAD VIDEO"})]}),t("div",{className:"mt-5",children:t(F,{})})]})};export{$ as default};
