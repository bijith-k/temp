import{r as o,u as f,b as x,d as u,j as l,c as a}from"./index-75e0cb1c.js";import{S as v}from"./Sidebar-33147c50.js";import"./index.esm-efe2c39d.js";import"./index.esm-ed29fecc.js";import"./index.esm-b2e70fb2.js";import"./index.esm-90dfe48c.js";import"./index.esm-21486a75.js";const D=()=>{const[b,h]=o.useState([]),[S,p]=o.useState({}),r=f(),t=x(),[i,d]=o.useState(""),[n,c]=o.useState("");localStorage.getItem("Adtoken"),o.useEffect(()=>{u("Adtoken").get("admin/boards").then(e=>{e.data.status==!1?(t({title:e.data.message,status:"error",duration:5e3,isClosable:!0,position:"top"}),localStorage.removeItem("Adtoken"),r("/admin")):h(e.data.boards)}).catch(e=>{console.log(e),t({title:e.message,status:"error",duration:5e3,isClosable:!0,position:"top"})})},[]);const m=localStorage.getItem("branchId");return o.useEffect(()=>{u("Adtoken").get(`admin/branches?id=${m}`).then(e=>{e.data.status==!1?(t({title:e.data.message,status:"error",duration:5e3,isClosable:!0,position:"top"}),localStorage.removeItem("Adtoken"),r("/admin")):(p(e.data.branches),d(e.data.branches.board._id),c(e.data.branches.name))}).catch(e=>{t({title:e.message,status:"error",duration:5e3,isClosable:!0,position:"top"})})},[]),l("div",{className:"bg-sky-900 min-h-screen max-w-screen-2xl mx-auto flex overflow-x-hidden",children:[a("div",{className:"bg-dark-purple",children:a(v,{})}),l("div",{className:"w-full mt-10",children:[a("h1",{className:"text-center text-black font-extrabold bg-white p-3 ",children:"EDIT BRANCH"}),l("form",{action:"",onSubmit:e=>{e.preventDefault();const g=/^[a-zA-Z0-9]+([ \-'][a-zA-Z0-9]+)*$/;if(!i)return t({title:"Please select a board",status:"warning",duration:5e3,isClosable:!0,position:"top"});if(!n||!g.test(n))return t({title:"Please enter the branch name",description:"Don't start name with spaces and enter only letters",status:"warning",duration:5e3,isClosable:!0,position:"top"});u("Adtoken").post(`admin/edit-branch?id=${m}`,{board:i,branch:n}).then(s=>{s.data.status==!1?(t({title:s.data.message,status:"error",duration:5e3,isClosable:!0,position:"top"}),localStorage.removeItem("Adtoken"),r("/admin")):(localStorage.removeItem("branchId"),t({title:s.data.message,status:"success",duration:5e3,isClosable:!0,position:"top"}),d(""),c(""),r("/admin/branch"))}).catch(s=>{t({title:s.message,status:"success",duration:5e3,isClosable:!0,position:"top"}),console.error(s,"err")})},className:"flex flex-col mx-auto  w-3/4 mt-8",children:[l("select",{id:"board",value:i,onChange:e=>{d(e.target.value)},className:"block border border-grey-light w-full p-3 rounded mb-4 uppercase",children:[a("option",{value:"",disabled:!0,children:"Select Board"}),b.map(e=>a("option",{value:e._id,children:e.name},e._id))]}),a("input",{type:"text",placeholder:"Enter name of branch..",value:n,onChange:e=>c(e.target.value),id:"branch",className:"block border border-grey-light w-full p-3 rounded mb-4 uppercase"}),a("button",{type:"submit",className:"bg-gray-300 text-sky-900 p-3 font-semibold rounded-lg mt-2",children:"EDIT BRANCH"})]})]})]})};export{D as default};
